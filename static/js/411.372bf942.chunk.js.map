{"version":3,"file":"static/js/411.372bf942.chunk.js","mappings":"qPACA,EAA2B,8BAA3B,EAAiE,2B,SCgFjE,EA1EoB,WAClB,OAA8BA,EAAAA,EAAAA,UAAS,MAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA4BF,EAAAA,EAAAA,UAAS,aAArC,eAAOG,EAAP,KAAeC,EAAf,KACA,GAA0BJ,EAAAA,EAAAA,UAAS,MAAnC,eAAOK,EAAP,KAAcC,EAAd,KACA,GAAwBN,EAAAA,EAAAA,UAAS,GAAjC,eAAOO,EAAP,KAAaC,EAAb,KACA,GAAyCR,EAAAA,EAAAA,WAAS,GAAlD,eAAOS,EAAP,KAAqBC,EAArB,KACA,GAAkCV,EAAAA,EAAAA,WAAS,GAA3C,eAAOW,EAAP,KAAkBC,EAAlB,KACA,GAA0BZ,EAAAA,EAAAA,UAAS,MAAnC,eAAOa,EAAP,KAAcC,EAAd,MAEAC,EAAAA,EAAAA,YAAU,YACR,iBAAC,2FACCX,EAAU,WACVE,EAAS,MAFV,mBAIqBU,EAAAA,EAAAA,MAJrB,QAISC,EAJT,SAKUf,EAAWe,GAClBA,GAAOb,EAAU,aANpB,kDAQGA,EAAU,YACVE,EAAS,KAAEY,SATd,yDAAD,EAYD,GAAE,KAEHH,EAAAA,EAAAA,YAAU,WACK,IAATR,IACF,iBAAC,8GAEqBS,EAAAA,EAAAA,IAAWT,GAFhC,QAESU,EAFT,SAIKf,GAAW,SAAAiB,GACT,MAAM,GAAN,eAAWA,IAAX,OAAoBF,GACrB,KACA,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAKG,QAAS,GAAKV,GAAiB,GAPvC,gDASGJ,EAAS,KAAEY,SATd,wDAAD,EAaH,GAAE,CAACX,IAEJ,IAAMc,EAAY,SAAAC,GAChBV,GAAa,GACbE,EAASQ,EACV,EAED,OACE,4BACE,eAAIC,UAAU,kBAAd,SAAgC,uBACpB,cAAXpB,IACC,eAAIoB,UAAWC,EAAf,SACGvB,GACCA,EAAQwB,KAAI,SAAAC,GAAM,OAChB,SAACC,EAAA,EAAD,CACEN,UAAWA,EAEXK,OAAQA,GADHA,EAAOJ,GAHE,MASvBb,IAAuB,OAAPR,QAAO,IAAPA,OAAA,EAAAA,EAASmB,QAAS,IACjC,SAACQ,EAAA,EAAD,CAAaC,QAAS,kBAAMrB,GAAQ,SAAAW,GAAI,OAAIA,EAAO,CAAX,GAAlB,IAEvBR,IACC,SAACmB,EAAA,EAAD,CAAYR,GAAIT,EAAOkB,QAAS,kBAAMnB,GAAa,SAAAO,GAAI,OAAKA,CAAL,GAAvB,IAEtB,aAAXhB,GAAyBE,IACxB,iBAAKkB,UAAWC,EAAhB,UAA2B,IAAEnB,EAAM,SAI1C,C","sources":["webpack://auto-rent/./src/pages/CarsCatalog/CarsCatalog.module.css?54c5","pages/CarsCatalog/CarsCatalog.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"cardList\":\"CarsCatalog_cardList__VlSCd\",\"error\":\"CarsCatalog_error__tQC9Q\"};","import { useEffect, useState } from 'react';\nimport { getAdverts } from '../../services/advertsApi';\nimport AdvertCard from 'components/AdvertCard/AdvertCard';\nimport LoadMoreBtn from 'components/LoadMoreBtn/LoadMoreBtn';\nimport PopUpModal from 'components/PopUpModal/PopUpModal';\nimport css from './CarsCatalog.module.css';\n\nconst CarsCatalog = () => {\n  const [adverts, setAdverts] = useState(null);\n  const [status, setStatus] = useState('fullfield');\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const [showLoadMore, setShowLoadrMore] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [carId, setCarId] = useState(null);\n\n  useEffect(() => {\n    (async () => {\n      setStatus('pending');\n      setError(null);\n      try {\n        const res = await getAdverts();\n        res && setAdverts(res);\n        res && setStatus('fullfield');\n      } catch (e) {\n        setStatus('rejected');\n        setError(e.message);\n      }\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (page !== 1) {\n      (async () => {\n        try {\n          const res = await getAdverts(page);\n          res &&\n            setAdverts(prev => {\n              return [...prev, ...res];\n            });\n          res?.length < 8 && setShowLoadrMore(false);\n        } catch (e) {\n          setError(e.message);\n        }\n      })();\n    }\n  }, [page]);\n\n  const openModal = id => {\n    setShowModal(true);\n    setCarId(id);\n  };\n\n  return (\n    <div>\n      <h1 className=\"visually-hidden\">Car Rantal Catalog</h1>\n      {status === 'fullfield' && (\n        <ul className={css.cardList}>\n          {adverts &&\n            adverts.map(advert => (\n              <AdvertCard\n                openModal={openModal}\n                key={advert.id}\n                advert={advert}\n              />\n            ))}\n        </ul>\n      )}\n      {showLoadMore && adverts?.length > 7 && (\n        <LoadMoreBtn onClick={() => setPage(prev => prev + 1)} />\n      )}\n      {showModal && (\n        <PopUpModal id={carId} onClose={() => setShowModal(prev => !prev)} />\n      )}\n      {status === 'rejected' && error && (\n        <div className={css.error}> {error} </div>\n      )}\n    </div>\n  );\n};\n\nexport default CarsCatalog;\n"],"names":["useState","adverts","setAdverts","status","setStatus","error","setError","page","setPage","showLoadMore","setShowLoadrMore","showModal","setShowModal","carId","setCarId","useEffect","getAdverts","res","message","prev","length","openModal","id","className","css","map","advert","AdvertCard","LoadMoreBtn","onClick","PopUpModal","onClose"],"sourceRoot":""}