{"version":3,"file":"static/js/5.d9387185.chunk.js","mappings":"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","sources":["webpack://auto-rent/./src/pages/Favorite/Favorite.module.css?314f","pages/Favorite/Favorite.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"cardList\":\"Favorite_cardList__zmKJr\",\"error\":\"Favorite_error__+MSZ8\"};","import { useEffect, useState } from 'react';\nimport { getAllAdverts, getFavotites, search } from '../../services/advertsApi';\nimport { readFromLS, writeToLS } from 'services/localStoreApi';\nimport SearchBar from 'components/SearchBar/SearchBar';\nimport AdvertCard from 'components/AdvertCard/AdvertCard';\nimport LoadMoreBtn from 'components/LoadMoreBtn/LoadMoreBtn';\nimport PopUpModal from 'components/PopUpModal/PopUpModal';\nimport css from './Favorite.module.css';\n\nconst Favorite = () => {\n  const [adverts, setAdverts] = useState(null);\n  const [status, setStatus] = useState('fullfield');\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const [showLoadMore, setShowLoadrMore] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [carId, setCarId] = useState(null);\n  const [isSearchActive, setIsSearchActive] = useState(false);\n  const [searchData, setSearchData] = useState(null);\n  const [shoundUpdateCache, setShoundUpdateCache] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      setStatus('pending');\n      setShoundUpdateCache(false);\n      setError(null);\n      try {\n        if (!readFromLS('cars') ) {\n          const all = await getAllAdverts();\n          all && writeToLS('cars', all.data);\n        }\n        const res = await getFavotites();\n        res && setAdverts(res);\n        setIsSearchActive(false);\n        res && setStatus('fullfield');\n      } catch (e) {\n        setStatus('rejected');\n        setError(e.message);\n      }\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (page !== 1) {\n      (async () => {\n        setShoundUpdateCache(false);\n        try {\n          const res = await getFavotites(page);\n          res &&\n            setAdverts(prev => {\n              return [...prev, ...res];\n            });\n          res?.length < 8 && setShowLoadrMore(false);\n        } catch (e) {\n          setError(e.message);\n        }\n      })();\n    }\n  }, [page]);\n\n  useEffect(() => {\n    (async () => {\n      if (isSearchActive) {\n        const response = await search(searchData, page, shoundUpdateCache);\n        response && setAdverts(response);\n        response && response.length >= 8 && response.length < 30\n          ? setShowLoadrMore(true)\n          : setShowLoadrMore(false);\n      }\n    })();\n  }, [isSearchActive, page, searchData, shoundUpdateCache]);\n\n  function handleSearch(data) {\n    setSearchData(data);\n    setPage(1);\n    setShowLoadrMore(true);\n    setIsSearchActive(true);\n  }\n\n  const openModal = id => {\n    setShowModal(true);\n    setCarId(id);\n  };\n\n  return (\n    <div>\n      <h1 className=\"visually-hidden\">Favorites Car</h1>\n      <SearchBar onSearch={handleSearch} />\n      {status === 'fullfield' && (\n        <ul className={css.cardList}>\n          {adverts &&\n            adverts.map(advert => (\n              <AdvertCard\n                openModal={openModal}\n                key={advert.id}\n                advert={advert}\n              />\n            ))}\n        </ul>\n      )}\n      {showLoadMore && adverts?.length > 7 && (\n        <LoadMoreBtn onClick={() => setPage(prev => prev + 1)} />\n      )}\n      {showModal && (\n        <PopUpModal id={carId} onClose={() => setShowModal(prev => !prev)} />\n      )}\n      {status === 'rejected' && error && (\n        <div className={css.error}> {error} </div>\n      )}\n    </div>\n  );\n};\n\nexport default Favorite;\n"],"names":["useState","adverts","setAdverts","status","setStatus","error","setError","page","setPage","showLoadMore","setShowLoadrMore","showModal","setShowModal","carId","setCarId","isSearchActive","setIsSearchActive","searchData","setSearchData","shoundUpdateCache","setShoundUpdateCache","useEffect","readFromLS","getAllAdverts","all","writeToLS","data","getFavotites","res","message","prev","length","search","response","openModal","id","className","SearchBar","onSearch","css","map","advert","AdvertCard","LoadMoreBtn","onClick","PopUpModal","onClose"],"sourceRoot":""}